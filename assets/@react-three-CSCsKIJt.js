import{r as M,j as G}from"./react-CCeLOw5g.js";import{L as we,a as Rt,R as kt,U as Tt,B as At,M as Dt,C as Lt,b as Ft,O as De,P as Le,S as $e,c as _e,N as It,A as zt,W as Ht,d as Bt,e as Wt,f as Nt,V as $t,g as Y,h as nt,i as qt,T as Gt,D as Ut,j as qe,k as Vt}from"./three-CzPqfTfU.js";import{u as Xt}from"./react-use-measure-BS8V-vA-.js";import{F as Yt,u as Zt}from"./its-fine-B6hyQCE-.js";import{R as Kt,c as ie}from"./react-reconciler-DE9uso_i.js";import{_ as Jt}from"./@babel-CF3RwP-h.js";import{c as Qt}from"./react-dom-BEAq4G6B.js";import{G as Fe,D as en,M as Pe}from"./three-stdlib-jZmdj1Zp.js";import{c as tn}from"./zustand-Dg_Q2Gop.js";import{s as nn,p as rn,c as on}from"./suspend-react-BKIKQNXN.js";function Kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jn(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(o,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),o}const sn="modulepreload",an=function(e){return"/3DPortfolio/"+e},Ge={},Qn=function(t,o,i){let a=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),f=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));a=Promise.allSettled(o.map(l=>{if(l=an(l),l in Ge)return;Ge[l]=!0;const h=l.endsWith(".css"),r=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${r}`))return;const n=document.createElement("link");if(n.rel=h?"stylesheet":sn,h||(n.as="script"),n.crossOrigin="",n.href=l,f&&n.setAttribute("nonce",f),document.head.appendChild(n),h)return new Promise((s,v)=>{n.addEventListener("load",s),n.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function u(g){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=g,window.dispatchEvent(f),!f.defaultPrevented)throw g}return a.then(g=>{for(const f of g||[])f.status==="rejected"&&u(f.reason);return t().catch(u)})};var rt={exports:{}},ot={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(y,E){var w=y.length;y.push(E);e:for(;0<w;){var S=w-1>>>1,k=y[S];if(0<a(k,E))y[S]=E,y[w]=k,w=S;else break e}}function o(y){return y.length===0?null:y[0]}function i(y){if(y.length===0)return null;var E=y[0],w=y.pop();if(w!==E){y[0]=w;e:for(var S=0,k=y.length,R=k>>>1;S<R;){var W=2*(S+1)-1,$=y[W],V=W+1,Q=y[V];if(0>a($,w))V<k&&0>a(Q,$)?(y[S]=Q,y[V]=w,S=V):(y[S]=$,y[W]=w,S=W);else if(V<k&&0>a(Q,w))y[S]=Q,y[V]=w,S=V;else break e}}return E}function a(y,E){var w=y.sortIndex-E.sortIndex;return w!==0?w:y.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var g=Date,f=g.now();e.unstable_now=function(){return g.now()-f}}var l=[],h=[],r=1,n=null,s=3,v=!1,m=!1,_=!1,p=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(y){for(var E=o(h);E!==null;){if(E.callback===null)i(h);else if(E.startTime<=y)i(h),E.sortIndex=E.expirationTime,t(l,E);else break;E=o(h)}}function x(y){if(_=!1,P(y),!m)if(o(l)!==null)m=!0,N(O);else{var E=o(h);E!==null&&H(x,E.startTime-y)}}function O(y,E){m=!1,_&&(_=!1,c(D),D=-1),v=!0;var w=s;try{for(P(E),n=o(l);n!==null&&(!(n.expirationTime>E)||y&&!b());){var S=n.callback;if(typeof S=="function"){n.callback=null,s=n.priorityLevel;var k=S(n.expirationTime<=E);E=e.unstable_now(),typeof k=="function"?n.callback=k:n===o(l)&&i(l),P(E)}else i(l);n=o(l)}if(n!==null)var R=!0;else{var W=o(h);W!==null&&H(x,W.startTime-E),R=!1}return R}finally{n=null,s=w,v=!1}}var C=!1,T=null,D=-1,j=5,L=-1;function b(){return!(e.unstable_now()-L<j)}function A(){if(T!==null){var y=e.unstable_now();L=y;var E=!0;try{E=T(!0,y)}finally{E?B():(C=!1,T=null)}}else C=!1}var B;if(typeof d=="function")B=function(){d(A)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,z=U.port2;U.port1.onmessage=A,B=function(){z.postMessage(null)}}else B=function(){p(A,0)};function N(y){T=y,C||(C=!0,B())}function H(y,E){D=p(function(){y(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(y){y.callback=null},e.unstable_continueExecution=function(){m||v||(m=!0,N(O))},e.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<y?Math.floor(1e3/y):5},e.unstable_getCurrentPriorityLevel=function(){return s},e.unstable_getFirstCallbackNode=function(){return o(l)},e.unstable_next=function(y){switch(s){case 1:case 2:case 3:var E=3;break;default:E=s}var w=s;s=E;try{return y()}finally{s=w}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(y,E){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var w=s;s=y;try{return E()}finally{s=w}},e.unstable_scheduleCallback=function(y,E,w){var S=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?S+w:S):w=S,y){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=w+k,y={id:r++,callback:E,priorityLevel:y,startTime:w,expirationTime:k,sortIndex:-1},w>S?(y.sortIndex=w,t(h,y),o(l)===null&&y===o(h)&&(_?(c(D),D=-1):_=!0,H(x,w-S))):(y.sortIndex=k,t(l,y),m||v||(m=!0,N(O))),y},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(y){var E=s;return function(){var w=s;s=E;try{return y.apply(this,arguments)}finally{s=w}}}})(ot);rt.exports=ot;var Ue=rt.exports;const Ie={},ln=e=>void Object.assign(Ie,e);function cn(e,t){function o(r,{args:n=[],attach:s,...v},m){let _=`${r[0].toUpperCase()}${r.slice(1)}`,p;if(r==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const c=v.object;p=re(c,{type:r,root:m,attach:s,primitive:!0})}else{const c=Ie[_];if(!c)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(n))throw new Error("R3F: The args prop must be an array!");p=re(new c(...n),{type:r,root:m,attach:s,memoizedProps:{args:n}})}return p.__r3f.attach===void 0&&(p instanceof At?p.__r3f.attach="geometry":p instanceof Dt&&(p.__r3f.attach="material")),_!=="inject"&&Se(p,v),p}function i(r,n){let s=!1;if(n){var v,m;(v=n.__r3f)!=null&&v.attach?Me(r,n,n.__r3f.attach):n.isObject3D&&r.isObject3D&&(r.add(n),s=!0),s||(m=r.__r3f)==null||m.objects.push(n),n.__r3f||re(n,{}),n.__r3f.parent=r,Te(n),oe(n)}}function a(r,n,s){let v=!1;if(n){var m,_;if((m=n.__r3f)!=null&&m.attach)Me(r,n,n.__r3f.attach);else if(n.isObject3D&&r.isObject3D){n.parent=r,n.dispatchEvent({type:"added"}),r.dispatchEvent({type:"childadded",child:n});const p=r.children.filter(d=>d!==n),c=p.indexOf(s);r.children=[...p.slice(0,c),n,...p.slice(c)],v=!0}v||(_=r.__r3f)==null||_.objects.push(n),n.__r3f||re(n,{}),n.__r3f.parent=r,Te(n),oe(n)}}function u(r,n,s=!1){r&&[...r].forEach(v=>g(n,v,s))}function g(r,n,s){if(n){var v,m,_;if(n.__r3f&&(n.__r3f.parent=null),(v=r.__r3f)!=null&&v.objects&&(r.__r3f.objects=r.__r3f.objects.filter(x=>x!==n)),(m=n.__r3f)!=null&&m.attach)Ke(r,n,n.__r3f.attach);else if(n.isObject3D&&r.isObject3D){var p;r.remove(n),(p=n.__r3f)!=null&&p.root&&yn(ge(n),n)}const d=(_=n.__r3f)==null?void 0:_.primitive,P=!d&&(s===void 0?n.dispose!==null:s);if(!d){var c;u((c=n.__r3f)==null?void 0:c.objects,n,P),u(n.children,n,P)}if(delete n.__r3f,P&&n.dispose&&n.type!=="Scene"){const x=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Ue.unstable_scheduleCallback(Ue.unstable_IdlePriority,x):x()}oe(r)}}function f(r,n,s,v){var m;const _=(m=r.__r3f)==null?void 0:m.parent;if(!_)return;const p=o(n,s,r.__r3f.root);if(r.children){for(const c of r.children)c.__r3f&&i(p,c);r.children=r.children.filter(c=>!c.__r3f)}r.__r3f.objects.forEach(c=>i(p,c)),r.__r3f.objects=[],r.__r3f.autoRemovedBeforeAppend||g(_,r),p.parent&&(p.__r3f.autoRemovedBeforeAppend=!0),i(_,p),p.raycast&&p.__r3f.eventCount&&ge(p).getState().internal.interaction.push(p),[v,v.alternate].forEach(c=>{c!==null&&(c.stateNode=p,c.ref&&(typeof c.ref=="function"?c.ref(p):c.ref.current=p))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Kt({createInstance:o,removeChild:g,appendChild:i,appendInitialChild:i,insertBefore:a,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(r,n)=>{if(!n)return;const s=r.getState().scene;s.__r3f&&(s.__r3f.root=r,i(s,n))},removeChildFromContainer:(r,n)=>{n&&g(r.getState().scene,n)},insertInContainerBefore:(r,n,s)=>{if(!n||!s)return;const v=r.getState().scene;v.__r3f&&a(v,n,s)},getRootHostContext:()=>null,getChildHostContext:r=>r,finalizeInitialChildren(r){var n;return!!((n=r==null?void 0:r.__r3f)!=null?n:{}).handlers},prepareUpdate(r,n,s,v){var m;if(((m=r==null?void 0:r.__r3f)!=null?m:{}).primitive&&v.object&&v.object!==r)return[!0];{const{args:p=[],children:c,...d}=v,{args:P=[],children:x,...O}=s;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((T,D)=>T!==P[D]))return[!0];const C=ft(r,d,O,!0);return C.changes.length?[!1,C]:null}},commitUpdate(r,[n,s],v,m,_,p){n?f(r,v,_,p):Se(r,s)},commitMount(r,n,s,v){var m;const _=(m=r.__r3f)!=null?m:{};r.raycast&&_.handlers&&_.eventCount&&ge(r).getState().internal.interaction.push(r)},getPublicInstance:r=>r,prepareForCommit:()=>null,preparePortalMount:r=>re(r.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(r){var n;const{attach:s,parent:v}=(n=r.__r3f)!=null?n:{};s&&v&&Ke(v,r,s),r.isObject3D&&(r.visible=!1),oe(r)},unhideInstance(r,n){var s;const{attach:v,parent:m}=(s=r.__r3f)!=null?s:{};v&&m&&Me(m,r,v),(r.isObject3D&&n.visible==null||n.visible)&&(r.visible=!0),oe(r)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>t?t():ie.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&F.fun(performance.now)?performance.now:F.fun(Date.now)?Date.now:()=>0,scheduleTimeout:F.fun(setTimeout)?setTimeout:void 0,cancelTimeout:F.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Se}}var Ve,Xe;const Ee=e=>"colorSpace"in e||"outputColorSpace"in e,it=()=>{var e;return(e=Ie.ColorManagement)!=null?e:null},st=e=>e&&e.isOrthographicCamera,un=e=>e&&e.hasOwnProperty("current"),ue=typeof window<"u"&&((Ve=window.document)!=null&&Ve.createElement||((Xe=window.navigator)==null?void 0:Xe.product)==="ReactNative")?M.useLayoutEffect:M.useEffect;function at(e){const t=M.useRef(e);return ue(()=>void(t.current=e),[e]),t}function fn({set:e}){return ue(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class lt extends M.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}lt.getDerivedStateFromError=()=>({error:!0});const ct="__default",Ye=new Map,dn=e=>e&&!!e.memoized&&!!e.changes;function ut(e){var t;const o=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],o),e[1]):e}const le=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()};function ge(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const F={obj:e=>e===Object(e)&&!F.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:o="shallow",objects:i="reference",strict:a=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(F.str(e)||F.num(e)||F.boo(e))return e===t;const u=F.obj(e);if(u&&i==="reference")return e===t;const g=F.arr(e);if(g&&o==="reference")return e===t;if((g||u)&&e===t)return!0;let f;for(f in e)if(!(f in t))return!1;if(u&&o==="shallow"&&i==="shallow"){for(f in a?t:e)if(!F.equ(e[f],t[f],{strict:a,objects:"reference"}))return!1}else for(f in a?t:e)if(e[f]!==t[f])return!1;if(F.und(f)){if(g&&e.length===0&&t.length===0||u&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function pn(e){const t={nodes:{},materials:{}};return e&&e.traverse(o=>{o.name&&(t.nodes[o.name]=o),o.material&&!t.materials[o.material.name]&&(t.materials[o.material.name]=o.material)}),t}function vn(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function re(e,t){const o=e;return o.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function ke(e,t){let o=e;if(t.includes("-")){const i=t.split("-"),a=i.pop();return o=i.reduce((u,g)=>u[g],e),{target:o,key:a}}else return{target:o,key:t}}const Ze=/-\d+$/;function Me(e,t,o){if(F.str(o)){if(Ze.test(o)){const u=o.replace(Ze,""),{target:g,key:f}=ke(e,u);Array.isArray(g[f])||(g[f]=[])}const{target:i,key:a}=ke(e,o);t.__r3f.previousAttach=i[a],i[a]=t}else t.__r3f.previousAttach=o(e,t)}function Ke(e,t,o){var i,a;if(F.str(o)){const{target:u,key:g}=ke(e,o),f=t.__r3f.previousAttach;f===void 0?delete u[g]:u[g]=f}else(i=t.__r3f)==null||i.previousAttach==null||i.previousAttach(e,t);(a=t.__r3f)==null||delete a.previousAttach}function ft(e,{children:t,key:o,ref:i,...a},{children:u,key:g,ref:f,...l}={},h=!1){const r=e.__r3f,n=Object.entries(a),s=[];if(h){const m=Object.keys(l);for(let _=0;_<m.length;_++)a.hasOwnProperty(m[_])||n.unshift([m[_],ct+"remove"])}n.forEach(([m,_])=>{var p;if((p=e.__r3f)!=null&&p.primitive&&m==="object"||F.equ(_,l[m]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(m))return s.push([m,_,!0,[]]);let c=[];m.includes("-")&&(c=m.split("-")),s.push([m,_,!1,c]);for(const d in a){const P=a[d];d.startsWith(`${m}-`)&&s.push([d,P,!1,d.split("-")])}});const v={...a};return r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.args&&(v.args=r.memoizedProps.args),r!=null&&r.memoizedProps&&r!=null&&r.memoizedProps.attach&&(v.attach=r.memoizedProps.attach),{memoized:v,changes:s}}const hn=typeof process<"u"&&!1;function Se(e,t){var o;const i=e.__r3f,a=i==null?void 0:i.root,u=a==null||a.getState==null?void 0:a.getState(),{memoized:g,changes:f}=dn(t)?t:ft(e,t),l=i==null?void 0:i.eventCount;e.__r3f&&(e.__r3f.memoizedProps=g);for(let r=0;r<f.length;r++){let[n,s,v,m]=f[r];if(Ee(e)){const d="srgb",P="srgb-linear";n==="encoding"?(n="colorSpace",s=s===3001?d:P):n==="outputEncoding"&&(n="outputColorSpace",s=s===3001?d:P)}let _=e,p=_[n];if(m.length&&(p=m.reduce((c,d)=>c[d],e),!(p&&p.set))){const[c,...d]=m.reverse();_=d.reverse().reduce((P,x)=>P[x],e),n=c}if(s===ct+"remove")if(_.constructor){let c=Ye.get(_.constructor);c||(c=new _.constructor,Ye.set(_.constructor,c)),s=c[n]}else s=0;if(v&&i)s?i.handlers[n]=s:delete i.handlers[n],i.eventCount=Object.keys(i.handlers).length;else if(p&&p.set&&(p.copy||p instanceof we)){if(Array.isArray(s))p.fromArray?p.fromArray(s):p.set(...s);else if(p.copy&&s&&s.constructor&&(hn?p.constructor.name===s.constructor.name:p.constructor===s.constructor))p.copy(s);else if(s!==void 0){const c=p instanceof Lt;!c&&p.setScalar?p.setScalar(s):p instanceof we&&s instanceof we?p.mask=s.mask:p.set(s),!it()&&u&&!u.linear&&c&&p.convertSRGBToLinear()}}else if(_[n]=s,_[n]instanceof Rt&&_[n].format===kt&&_[n].type===Tt&&u){const c=_[n];Ee(c)&&Ee(u.gl)?c.colorSpace=u.gl.outputColorSpace:c.encoding=u.gl.outputEncoding}oe(e)}if(i&&i.parent&&e.raycast&&l!==i.eventCount){const r=ge(e).getState().internal,n=r.interaction.indexOf(e);n>-1&&r.interaction.splice(n,1),i.eventCount&&r.interaction.push(e)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(o=e.__r3f)!=null&&o.parent&&Te(e),e}function oe(e){var t,o;const i=(t=e.__r3f)==null||(o=t.root)==null||o.getState==null?void 0:o.getState();i&&i.internal.frames===0&&i.invalidate()}function Te(e){e.onUpdate==null||e.onUpdate(e)}function mn(e,t){e.manual||(st(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ve(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function gn(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return ie.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ie.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ie.ContinuousEventPriority;default:return ie.DefaultEventPriority}}function dt(e,t,o,i){const a=o.get(t);a&&(o.delete(t),o.size===0&&(e.delete(i),a.target.releasePointerCapture(i)))}function yn(e,t){const{internal:o}=e.getState();o.interaction=o.interaction.filter(i=>i!==t),o.initialHits=o.initialHits.filter(i=>i!==t),o.hovered.forEach((i,a)=>{(i.eventObject===t||i.object===t)&&o.hovered.delete(a)}),o.capturedMap.forEach((i,a)=>{dt(o.capturedMap,t,i,a)})}function bn(e){function t(l){const{internal:h}=e.getState(),r=l.offsetX-h.initialClick[0],n=l.offsetY-h.initialClick[1];return Math.round(Math.sqrt(r*r+n*n))}function o(l){return l.filter(h=>["Move","Over","Enter","Out","Leave"].some(r=>{var n;return(n=h.__r3f)==null?void 0:n.handlers["onPointer"+r]}))}function i(l,h){const r=e.getState(),n=new Set,s=[],v=h?h(r.internal.interaction):r.internal.interaction;for(let c=0;c<v.length;c++){const d=le(v[c]);d&&(d.raycaster.camera=void 0)}r.previousRoot||r.events.compute==null||r.events.compute(l,r);function m(c){const d=le(c);if(!d||!d.events.enabled||d.raycaster.camera===null)return[];if(d.raycaster.camera===void 0){var P;d.events.compute==null||d.events.compute(l,d,(P=d.previousRoot)==null?void 0:P.getState()),d.raycaster.camera===void 0&&(d.raycaster.camera=null)}return d.raycaster.camera?d.raycaster.intersectObject(c,!0):[]}let _=v.flatMap(m).sort((c,d)=>{const P=le(c.object),x=le(d.object);return!P||!x?c.distance-d.distance:x.events.priority-P.events.priority||c.distance-d.distance}).filter(c=>{const d=ve(c);return n.has(d)?!1:(n.add(d),!0)});r.events.filter&&(_=r.events.filter(_,r));for(const c of _){let d=c.object;for(;d;){var p;(p=d.__r3f)!=null&&p.eventCount&&s.push({...c,eventObject:d}),d=d.parent}}if("pointerId"in l&&r.internal.capturedMap.has(l.pointerId))for(let c of r.internal.capturedMap.get(l.pointerId).values())n.has(ve(c.intersection))||s.push(c.intersection);return s}function a(l,h,r,n){const s=e.getState();if(l.length){const v={stopped:!1};for(const m of l){const _=le(m.object)||s,{raycaster:p,pointer:c,camera:d,internal:P}=_,x=new Y(c.x,c.y,0).unproject(d),O=L=>{var b,A;return(b=(A=P.capturedMap.get(L))==null?void 0:A.has(m.eventObject))!=null?b:!1},C=L=>{const b={intersection:m,target:h.target};P.capturedMap.has(L)?P.capturedMap.get(L).set(m.eventObject,b):P.capturedMap.set(L,new Map([[m.eventObject,b]])),h.target.setPointerCapture(L)},T=L=>{const b=P.capturedMap.get(L);b&&dt(P.capturedMap,m.eventObject,b,L)};let D={};for(let L in h){let b=h[L];typeof b!="function"&&(D[L]=b)}let j={...m,...D,pointer:c,intersections:l,stopped:v.stopped,delta:r,unprojectedPoint:x,ray:p.ray,camera:d,stopPropagation(){const L="pointerId"in h&&P.capturedMap.get(h.pointerId);if((!L||L.has(m.eventObject))&&(j.stopped=v.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(b=>b.eventObject===m.eventObject))){const b=l.slice(0,l.indexOf(m));u([...b,m])}},target:{hasPointerCapture:O,setPointerCapture:C,releasePointerCapture:T},currentTarget:{hasPointerCapture:O,setPointerCapture:C,releasePointerCapture:T},nativeEvent:h};if(n(j),v.stopped===!0)break}}return l}function u(l){const{internal:h}=e.getState();for(const r of h.hovered.values())if(!l.length||!l.find(n=>n.object===r.object&&n.index===r.index&&n.instanceId===r.instanceId)){const s=r.eventObject.__r3f,v=s==null?void 0:s.handlers;if(h.hovered.delete(ve(r)),s!=null&&s.eventCount){const m={...r,intersections:l};v.onPointerOut==null||v.onPointerOut(m),v.onPointerLeave==null||v.onPointerLeave(m)}}}function g(l,h){for(let r=0;r<h.length;r++){const n=h[r].__r3f;n==null||n.handlers.onPointerMissed==null||n.handlers.onPointerMissed(l)}}function f(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>u([]);case"onLostPointerCapture":return h=>{const{internal:r}=e.getState();"pointerId"in h&&r.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(h.pointerId)&&(r.capturedMap.delete(h.pointerId),u([]))})}}return function(r){const{onPointerMissed:n,internal:s}=e.getState();s.lastEvent.current=r;const v=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",p=i(r,v?o:void 0),c=m?t(r):0;l==="onPointerDown"&&(s.initialClick=[r.offsetX,r.offsetY],s.initialHits=p.map(P=>P.eventObject)),m&&!p.length&&c<=2&&(g(r,s.interaction),n&&n(r)),v&&u(p);function d(P){const x=P.eventObject,O=x.__r3f,C=O==null?void 0:O.handlers;if(O!=null&&O.eventCount)if(v){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const T=ve(P),D=s.hovered.get(T);D?D.stopped&&P.stopPropagation():(s.hovered.set(T,P),C.onPointerOver==null||C.onPointerOver(P),C.onPointerEnter==null||C.onPointerEnter(P))}C.onPointerMove==null||C.onPointerMove(P)}else{const T=C[l];T?(!m||s.initialHits.includes(x))&&(g(r,s.interaction.filter(D=>!s.initialHits.includes(D))),T(P)):m&&s.initialHits.includes(x)&&g(r,s.interaction.filter(D=>!s.initialHits.includes(D)))}}a(p,r,c,d)}}return{handlePointer:f}}const pt=e=>!!(e!=null&&e.render),vt=M.createContext(null),wn=(e,t)=>{const o=tn((f,l)=>{const h=new Y,r=new Y,n=new Y;function s(c=l().camera,d=r,P=l().size){const{width:x,height:O,top:C,left:T}=P,D=x/O;d instanceof Y?n.copy(d):n.set(...d);const j=c.getWorldPosition(h).distanceTo(n);if(st(c))return{width:x/c.zoom,height:O/c.zoom,top:C,left:T,factor:1,distance:j,aspect:D};{const L=c.fov*Math.PI/180,b=2*Math.tan(L/2)*j,A=b*(x/O);return{width:A,height:b,top:C,left:T,factor:x/A,distance:j,aspect:D}}}let v;const m=c=>f(d=>({performance:{...d.performance,current:c}})),_=new nt;return{set:f,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(c=1)=>e(l(),c),advance:(c,d)=>t(c,d,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new qt,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const c=l();v&&clearTimeout(v),c.performance.current!==c.performance.min&&m(c.performance.min),v=setTimeout(()=>m(l().performance.max),c.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:s},setEvents:c=>f(d=>({...d,events:{...d.events,...c}})),setSize:(c,d,P,x,O)=>{const C=l().camera,T={width:c,height:d,top:x||0,left:O||0,updateStyle:P};f(D=>({size:T,viewport:{...D.viewport,...s(C,r,T)}}))},setDpr:c=>f(d=>{const P=ut(c);return{viewport:{...d.viewport,dpr:P,initialDpr:d.viewport.initialDpr||P}}}),setFrameloop:(c="always")=>{const d=l().clock;d.stop(),d.elapsedTime=0,c!=="never"&&(d.start(),d.elapsedTime=0),f(()=>({frameloop:c}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:M.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(c,d,P)=>{const x=l().internal;return x.priority=x.priority+(d>0?1:0),x.subscribers.push({ref:c,priority:d,store:P}),x.subscribers=x.subscribers.sort((O,C)=>O.priority-C.priority),()=>{const O=l().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(d>0?1:0),O.subscribers=O.subscribers.filter(C=>C.ref!==c))}}}}}),i=o.getState();let a=i.size,u=i.viewport.dpr,g=i.camera;return o.subscribe(()=>{const{camera:f,size:l,viewport:h,gl:r,set:n}=o.getState();if(l.width!==a.width||l.height!==a.height||h.dpr!==u){var s;a=l,u=h.dpr,mn(f,l),r.setPixelRatio(h.dpr);const v=(s=l.updateStyle)!=null?s:typeof HTMLCanvasElement<"u"&&r.domElement instanceof HTMLCanvasElement;r.setSize(l.width,l.height,v)}f!==g&&(g=f,n(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(f)}})))}),o.subscribe(f=>e(f)),o};function _n(e,t){const o={callback:e};return t.add(o),()=>void t.delete(o)}let he,ht=new Set,Pn=new Set,En=new Set;const er=e=>_n(e,ht);function Ce(e,t){if(e.size)for(const{callback:o}of e.values())o(t)}function ce(e,t){switch(e){case"before":return Ce(ht,t);case"after":return Ce(Pn,t);case"tail":return Ce(En,t)}}let xe,je;function Oe(e,t,o){let i=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),xe=t.internal.subscribers,he=0;he<xe.length;he++)je=xe[he],je.ref.current(je.store.getState(),i,o);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function Mn(e){let t=!1,o=!1,i,a,u;function g(h){a=requestAnimationFrame(g),t=!0,i=0,ce("before",h),o=!0;for(const n of e.values()){var r;u=n.store.getState(),u.internal.active&&(u.frameloop==="always"||u.internal.frames>0)&&!((r=u.gl.xr)!=null&&r.isPresenting)&&(i+=Oe(h,u))}if(o=!1,ce("after",h),i===0)return ce("tail",h),t=!1,cancelAnimationFrame(a)}function f(h,r=1){var n;if(!h)return e.forEach(s=>f(s.store.getState(),r));(n=h.gl.xr)!=null&&n.isPresenting||!h.internal.active||h.frameloop==="never"||(r>1?h.internal.frames=Math.min(60,h.internal.frames+r):o?h.internal.frames=2:h.internal.frames=1,t||(t=!0,requestAnimationFrame(g)))}function l(h,r=!0,n,s){if(r&&ce("before",h),n)Oe(h,n,s);else for(const v of e.values())Oe(h,v.store.getState());r&&ce("after",h)}return{loop:g,invalidate:f,advance:l}}function mt(){const e=M.useContext(vt);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Sn(e=o=>o,t){return mt()(e,t)}function gt(e,t=0){const o=mt(),i=o.getState().internal.subscribe,a=at(e);return ue(()=>i(a,t,o),[t,i,o]),null}const Je=new WeakMap;function yt(e,t){return function(o,...i){let a=Je.get(o);return a||(a=new o,Je.set(o,a)),e&&e(a),Promise.all(i.map(u=>new Promise((g,f)=>a.load(u,l=>{l.scene&&Object.assign(l,pn(l.scene)),g(l)},t,l=>f(new Error(`Could not load ${u}: ${l==null?void 0:l.message}`))))))}}function fe(e,t,o,i){const a=Array.isArray(t)?t:[t],u=nn(yt(o,i),[e,...a],{equal:F.equ});return Array.isArray(t)?u:u[0]}fe.preload=function(e,t,o){const i=Array.isArray(t)?t:[t];return rn(yt(o),[e,...i])};fe.clear=function(e,t){const o=Array.isArray(t)?t:[t];return on([e,...o])};const se=new Map,{invalidate:Qe,advance:et}=Mn(se),{reconciler:ye,applyProps:te}=cn(se,gn),ne={objects:"shallow",strict:!1},Cn=(e,t)=>{const o=typeof e=="function"?e(t):e;return pt(o)?o:new Ht({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function xn(e,t){const o=typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement;if(t){const{width:i,height:a,top:u,left:g,updateStyle:f=o}=t;return{width:i,height:a,top:u,left:g,updateStyle:f}}else if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:i,height:a,top:u,left:g}=e.parentElement.getBoundingClientRect();return{width:i,height:a,top:u,left:g,updateStyle:o}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0,updateStyle:o};return{width:0,height:0,top:0,left:0}}function jn(e){const t=se.get(e),o=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,u=i||wn(Qe,et),g=o||ye.createContainer(u,ie.ConcurrentRoot,null,!1,null,"",a,null);t||se.set(e,{fiber:g,store:u});let f,l=!1,h;return{configure(r={}){let{gl:n,size:s,scene:v,events:m,onCreated:_,shadows:p=!1,linear:c=!1,flat:d=!1,legacy:P=!1,orthographic:x=!1,frameloop:O="always",dpr:C=[1,2],performance:T,raycaster:D,camera:j,onPointerMissed:L}=r,b=u.getState(),A=b.gl;b.gl||b.set({gl:A=Cn(n,e)});let B=b.raycaster;B||b.set({raycaster:B=new Ft});const{params:U,...z}=D||{};if(F.equ(z,B,ne)||te(B,{...z}),F.equ(U,B.params,ne)||te(B,{params:{...B.params,...U}}),!b.camera||b.camera===h&&!F.equ(h,j,ne)){h=j;const w=j instanceof Bt,S=w?j:x?new De(0,0,0,0,.1,1e3):new Le(75,0,.1,1e3);w||(S.position.z=5,j&&(te(S,j),("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(S.manual=!0,S.updateProjectionMatrix())),!b.camera&&!(j!=null&&j.rotation)&&S.lookAt(0,0,0)),b.set({camera:S}),B.camera=S}if(!b.scene){let w;v instanceof $e?w=v:(w=new $e,v&&te(w,v)),b.set({scene:re(w)})}if(!b.xr){var N;const w=(R,W)=>{const $=u.getState();$.frameloop!=="never"&&et(R,!0,$,W)},S=()=>{const R=u.getState();R.gl.xr.enabled=R.gl.xr.isPresenting,R.gl.xr.setAnimationLoop(R.gl.xr.isPresenting?w:null),R.gl.xr.isPresenting||Qe(R)},k={connect(){const R=u.getState().gl;R.xr.addEventListener("sessionstart",S),R.xr.addEventListener("sessionend",S)},disconnect(){const R=u.getState().gl;R.xr.removeEventListener("sessionstart",S),R.xr.removeEventListener("sessionend",S)}};typeof((N=A.xr)==null?void 0:N.addEventListener)=="function"&&k.connect(),b.set({xr:k})}if(A.shadowMap){const w=A.shadowMap.enabled,S=A.shadowMap.type;if(A.shadowMap.enabled=!!p,F.boo(p))A.shadowMap.type=_e;else if(F.str(p)){var H;const k={basic:Wt,percentage:Nt,soft:_e,variance:$t};A.shadowMap.type=(H=k[p])!=null?H:_e}else F.obj(p)&&Object.assign(A.shadowMap,p);(w!==A.shadowMap.enabled||S!==A.shadowMap.type)&&(A.shadowMap.needsUpdate=!0)}const y=it();y&&("enabled"in y?y.enabled=!P:"legacyMode"in y&&(y.legacyMode=P)),l||te(A,{outputEncoding:c?3e3:3001,toneMapping:d?It:zt}),b.legacy!==P&&b.set(()=>({legacy:P})),b.linear!==c&&b.set(()=>({linear:c})),b.flat!==d&&b.set(()=>({flat:d})),n&&!F.fun(n)&&!pt(n)&&!F.equ(n,A,ne)&&te(A,n),m&&!b.events.handlers&&b.set({events:m(u)});const E=xn(e,s);return F.equ(E,b.size,ne)||b.setSize(E.width,E.height,E.updateStyle,E.top,E.left),C&&b.viewport.dpr!==ut(C)&&b.setDpr(C),b.frameloop!==O&&b.setFrameloop(O),b.onPointerMissed||b.set({onPointerMissed:L}),T&&!F.equ(T,b.performance,ne)&&b.set(w=>({performance:{...w.performance,...T}})),f=_,l=!0,this},render(r){return l||this.configure(),ye.updateContainer(G.jsx(On,{store:u,children:r,onCreated:f,rootElement:e}),g,null,()=>{}),u},unmount(){bt(e)}}}function On({store:e,children:t,onCreated:o,rootElement:i}){return ue(()=>{const a=e.getState();a.set(u=>({internal:{...u.internal,active:!0}})),o&&o(a),e.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),G.jsx(vt.Provider,{value:e,children:t})}function bt(e,t){const o=se.get(e),i=o==null?void 0:o.fiber;if(i){const a=o==null?void 0:o.store.getState();a&&(a.internal.active=!1),ye.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var u,g,f,l;a.events.disconnect==null||a.events.disconnect(),(u=a.gl)==null||(g=u.renderLists)==null||g.dispose==null||g.dispose(),(f=a.gl)==null||f.forceContextLoss==null||f.forceContextLoss(),(l=a.gl)!=null&&l.xr&&a.xr.disconnect(),vn(a),se.delete(e)}catch{}},500)})}}ye.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:M.version});const Re={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Rn(e){const{handlePointer:t}=bn(e);return{priority:1,enabled:!0,compute(o,i,a){i.pointer.set(o.offsetX/i.size.width*2-1,-(o.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Re).reduce((o,i)=>({...o,[i]:t(i)}),{}),update:()=>{var o;const{events:i,internal:a}=e.getState();(o=a.lastEvent)!=null&&o.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:o=>{var i;const{set:a,events:u}=e.getState();u.disconnect==null||u.disconnect(),a(g=>({events:{...g.events,connected:o}})),Object.entries((i=u.handlers)!=null?i:[]).forEach(([g,f])=>{const[l,h]=Re[g];o.addEventListener(l,f,{passive:h})})},disconnect:()=>{const{set:o,events:i}=e.getState();if(i.connected){var a;Object.entries((a=i.handlers)!=null?a:[]).forEach(([u,g])=>{if(i&&i.connected instanceof HTMLElement){const[f]=Re[u];i.connected.removeEventListener(f,g)}}),o(u=>({events:{...u.events,connected:void 0}}))}}}}const kn=M.forwardRef(function({children:t,fallback:o,resize:i,style:a,gl:u,events:g=Rn,eventSource:f,eventPrefix:l,shadows:h,linear:r,flat:n,legacy:s,orthographic:v,frameloop:m,dpr:_,performance:p,raycaster:c,camera:d,scene:P,onPointerMissed:x,onCreated:O,...C},T){M.useMemo(()=>ln(Gt),[]);const D=Zt(),[j,L]=Xt({scroll:!0,debounce:{scroll:50,resize:0},...i}),b=M.useRef(null),A=M.useRef(null);M.useImperativeHandle(T,()=>b.current);const B=at(x),[U,z]=M.useState(!1),[N,H]=M.useState(!1);if(U)throw U;if(N)throw N;const y=M.useRef(null);ue(()=>{const w=b.current;L.width>0&&L.height>0&&w&&(y.current||(y.current=jn(w)),y.current.configure({gl:u,events:g,shadows:h,linear:r,flat:n,legacy:s,orthographic:v,frameloop:m,dpr:_,performance:p,raycaster:c,camera:d,scene:P,size:L,onPointerMissed:(...S)=>B.current==null?void 0:B.current(...S),onCreated:S=>{S.events.connect==null||S.events.connect(f?un(f)?f.current:f:A.current),l&&S.setEvents({compute:(k,R)=>{const W=k[l+"X"],$=k[l+"Y"];R.pointer.set(W/R.size.width*2-1,-($/R.size.height)*2+1),R.raycaster.setFromCamera(R.pointer,R.camera)}}),O==null||O(S)}}),y.current.render(G.jsx(D,{children:G.jsx(lt,{set:H,children:G.jsx(M.Suspense,{fallback:G.jsx(fn,{set:z}),children:t})})})))}),M.useEffect(()=>{const w=b.current;if(w)return()=>bt(w)},[]);const E=f?"none":"auto";return G.jsx("div",{ref:A,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:E,...a},...C,children:G.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:G.jsx("canvas",{ref:b,style:{display:"block"},children:o})})})}),tr=M.forwardRef(function(t,o){return G.jsx(Yt,{children:G.jsx(kn,{...t,ref:o})})}),de=new Y,ze=new Y,Tn=new Y,tt=new nt;function An(e,t,o){const i=de.setFromMatrixPosition(e.matrixWorld);i.project(t);const a=o.width/2,u=o.height/2;return[i.x*a+a,-(i.y*u)+u]}function Dn(e,t){const o=de.setFromMatrixPosition(e.matrixWorld),i=ze.setFromMatrixPosition(t.matrixWorld),a=o.sub(i),u=t.getWorldDirection(Tn);return a.angleTo(u)>Math.PI/2}function Ln(e,t,o,i){const a=de.setFromMatrixPosition(e.matrixWorld),u=a.clone();u.project(t),tt.set(u.x,u.y),o.setFromCamera(tt,t);const g=o.intersectObjects(i,!0);if(g.length){const f=g[0].distance;return a.distanceTo(o.ray.origin)<f}return!0}function Fn(e,t){if(t instanceof De)return t.zoom;if(t instanceof Le){const o=de.setFromMatrixPosition(e.matrixWorld),i=ze.setFromMatrixPosition(t.matrixWorld),a=t.fov*Math.PI/180,u=o.distanceTo(i);return 1/(2*Math.tan(a/2)*u)}else return 1}function In(e,t,o){if(t instanceof Le||t instanceof De){const i=de.setFromMatrixPosition(e.matrixWorld),a=ze.setFromMatrixPosition(t.matrixWorld),u=i.distanceTo(a),g=(o[1]-o[0])/(t.far-t.near),f=o[1]-g*t.far;return Math.round(g*u+f)}}const Ae=e=>Math.abs(e)<1e-10?0:e;function wt(e,t,o=""){let i="matrix3d(";for(let a=0;a!==16;a++)i+=Ae(t[a]*e.elements[a])+(a!==15?",":")");return o+i}const zn=(e=>t=>wt(t,e))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Hn=(e=>(t,o)=>wt(t,e(o),"translate(-50%,-50%)"))(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1]);function Bn(e){return e&&typeof e=="object"&&"current"in e}const nr=M.forwardRef(({children:e,eps:t=.001,style:o,className:i,prepend:a,center:u,fullscreen:g,portal:f,distanceFactor:l,sprite:h=!1,transform:r=!1,occlude:n,onOcclude:s,castShadow:v,receiveShadow:m,material:_,geometry:p,zIndexRange:c=[16777271,0],calculatePosition:d=An,as:P="div",wrapperClass:x,pointerEvents:O="auto",...C},T)=>{const{gl:D,camera:j,scene:L,size:b,raycaster:A,events:B,viewport:U}=Sn(),[z]=M.useState(()=>document.createElement(P)),N=M.useRef(),H=M.useRef(null),y=M.useRef(0),E=M.useRef([0,0]),w=M.useRef(null),S=M.useRef(null),k=(f==null?void 0:f.current)||B.connected||D.domElement.parentNode,R=M.useRef(null),W=M.useRef(!1),$=M.useMemo(()=>n&&n!=="blending"||Array.isArray(n)&&n.length&&Bn(n[0]),[n]);M.useLayoutEffect(()=>{const q=D.domElement;n&&n==="blending"?(q.style.zIndex=`${Math.floor(c[0]/2)}`,q.style.position="absolute",q.style.pointerEvents="none"):(q.style.zIndex=null,q.style.position=null,q.style.pointerEvents=null)},[n]),M.useLayoutEffect(()=>{if(H.current){const q=N.current=Qt(z);if(L.updateMatrixWorld(),r)z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const I=d(H.current,j,b);z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${I[0]}px,${I[1]}px,0);transform-origin:0 0;`}return k&&(a?k.prepend(z):k.appendChild(z)),()=>{k&&k.removeChild(z),q.unmount()}}},[k,r]),M.useLayoutEffect(()=>{x&&(z.className=x)},[x]);const V=M.useMemo(()=>r?{position:"absolute",top:0,left:0,width:b.width,height:b.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:u?"translate3d(-50%,-50%,0)":"none",...g&&{top:-b.height/2,left:-b.width/2,width:b.width,height:b.height},...o},[o,u,g,b,r]),Q=M.useMemo(()=>({position:"absolute",pointerEvents:O}),[O]);M.useLayoutEffect(()=>{if(W.current=!1,r){var q;(q=N.current)==null||q.render(M.createElement("div",{ref:w,style:V},M.createElement("div",{ref:S,style:Q},M.createElement("div",{ref:T,className:i,style:o,children:e}))))}else{var I;(I=N.current)==null||I.render(M.createElement("div",{ref:T,style:V,className:i,children:e}))}});const ee=M.useRef(!0);gt(q=>{if(H.current){j.updateMatrixWorld(),H.current.updateWorldMatrix(!0,!1);const I=r?E.current:d(H.current,j,b);if(r||Math.abs(y.current-j.zoom)>t||Math.abs(E.current[0]-I[0])>t||Math.abs(E.current[1]-I[1])>t){const Z=Dn(H.current,j);let X=!1;$&&(Array.isArray(n)?X=n.map(K=>K.current):n!=="blending"&&(X=[L]));const ae=ee.current;if(X){const K=Ln(H.current,j,A,X);ee.current=K&&!Z}else ee.current=!Z;ae!==ee.current&&(s?s(!ee.current):z.style.display=ee.current?"block":"none");const pe=Math.floor(c[0]/2),Et=n?$?[c[0],pe]:[pe-1,0]:c;if(z.style.zIndex=`${In(H.current,j,Et)}`,r){const[K,We]=[b.width/2,b.height/2],be=j.projectionMatrix.elements[5]*We,{isOrthographicCamera:Ne,top:Mt,left:St,bottom:Ct,right:xt}=j,jt=zn(j.matrixWorldInverse),Ot=Ne?`scale(${be})translate(${Ae(-(xt+St)/2)}px,${Ae((Mt+Ct)/2)}px)`:`translateZ(${be}px)`;let J=H.current.matrixWorld;h&&(J=j.matrixWorldInverse.clone().transpose().copyPosition(J).scale(H.current.scale),J.elements[3]=J.elements[7]=J.elements[11]=0,J.elements[15]=1),z.style.width=b.width+"px",z.style.height=b.height+"px",z.style.perspective=Ne?"":`${be}px`,w.current&&S.current&&(w.current.style.transform=`${Ot}${jt}translate(${K}px,${We}px)`,S.current.style.transform=Hn(J,1/((l||10)/400)))}else{const K=l===void 0?1:Fn(H.current,j)*l;z.style.transform=`translate3d(${I[0]}px,${I[1]}px,0) scale(${K})`}E.current=I,y.current=j.zoom}}if(!$&&R.current&&!W.current)if(r){if(w.current){const I=w.current.children[0];if(I!=null&&I.clientWidth&&I!=null&&I.clientHeight){const{isOrthographicCamera:Z}=j;if(Z||p)C.scale&&(Array.isArray(C.scale)?C.scale instanceof Y?R.current.scale.copy(C.scale.clone().divideScalar(1)):R.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):R.current.scale.setScalar(1/C.scale));else{const X=(l||10)/400,ae=I.clientWidth*X,pe=I.clientHeight*X;R.current.scale.set(ae,pe,1)}W.current=!0}}}else{const I=z.children[0];if(I!=null&&I.clientWidth&&I!=null&&I.clientHeight){const Z=1/U.factor,X=I.clientWidth*Z,ae=I.clientHeight*Z;R.current.scale.set(X,ae,1),W.current=!0}R.current.lookAt(q.camera.position)}});const Be=M.useMemo(()=>({vertexShader:r?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[r]);return M.createElement("group",Jt({},C,{ref:H}),n&&!$&&M.createElement("mesh",{castShadow:v,receiveShadow:m,ref:R},p||M.createElement("planeGeometry",null),_||M.createElement("shaderMaterial",{side:Ut,vertexShader:Be.vertexShader,fragmentShader:Be.fragmentShader})))});let me=null,_t="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Pt(e,t,o){return i=>{o&&o(i),e&&(me||(me=new en),me.setDecoderPath(typeof e=="string"?e:_t),i.setDRACOLoader(me)),t&&i.setMeshoptDecoder(typeof Pe=="function"?Pe():Pe)}}function He(e,t=!0,o=!0,i){return fe(Fe,e,Pt(t,o,i))}He.preload=(e,t=!0,o=!0,i)=>fe.preload(Fe,e,Pt(t,o,i));He.clear=e=>fe.clear(Fe,e);He.setDecoderPath=e=>{_t=e};function rr(e,t){const o=M.useRef(),[i]=M.useState(()=>t?t instanceof qe?{current:t}:t:o),[a]=M.useState(()=>new Vt(void 0));M.useLayoutEffect(()=>{t&&(i.current=t instanceof qe?t:t.current),a._root=i.current});const u=M.useRef({}),g=M.useMemo(()=>{const f={};return e.forEach(l=>Object.defineProperty(f,l.name,{enumerable:!0,get(){if(i.current)return u.current[l.name]||(u.current[l.name]=a.clipAction(l,i.current))},configurable:!0})),{ref:i,clips:e,actions:f,names:e.map(l=>l.name),mixer:a}},[e]);return gt((f,l)=>a.update(l)),M.useEffect(()=>{const f=i.current;return()=>{u.current={},a.stopAllAction(),Object.values(g.actions).forEach(l=>{f&&a.uncacheAction(l,f)})}},[e]),g}export{tr as C,nr as H,Qn as _,er as a,te as b,Jn as c,He as d,gt as e,rr as f,Kn as g,Sn as u};
